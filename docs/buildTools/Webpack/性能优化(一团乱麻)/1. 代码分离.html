<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>秘密の花園</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.2.3">
    <link rel="preload stylesheet" href="/docs/assets/style.Cx_1rYZe.css" as="style">
    
    <script type="module" src="/docs/assets/app.CYZY0tq6.js"></script>
    <link rel="preload" href="/docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/docs/assets/chunks/framework.2CELp8iJ.js">
    <link rel="modulepreload" href="/docs/assets/chunks/theme.bvAetKTo.js">
    <link rel="modulepreload" href="/docs/assets/buildTools_Webpack_性能优化(一团乱麻)_1. 代码分离.md.FU98uaJK.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-09596c99><!--[--><!--]--><!--[--><span tabindex="-1" data-v-27a6fc49></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-27a6fc49> Skip to content </a><!--]--><!----><header class="VPNav" data-v-09596c99 data-v-384096ef><div class="VPNavBar has-sidebar top" data-v-384096ef data-v-585947ee><div class="wrapper" data-v-585947ee><div class="container" data-v-585947ee><div class="title" data-v-585947ee><div class="VPNavBarTitle has-sidebar" data-v-585947ee data-v-2c7b1cf9><a class="title" href="/docs/" data-v-2c7b1cf9><!--[--><!--]--><!--[--><img class="VPImage logo" src="/docs/img/logo.jpg" alt data-v-64261b52><!--]--><span data-v-2c7b1cf9>秘密の花園</span><!--[--><!--]--></a></div></div><div class="content" data-v-585947ee><div class="content-body" data-v-585947ee><!--[--><!--]--><div class="VPNavBarSearch search" data-v-585947ee><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-585947ee data-v-d638b072><span id="main-nav-aria-label" class="visually-hidden" data-v-d638b072>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/" tabindex="0" data-v-d638b072 data-v-5f3ab943><!--[--><span data-v-5f3ab943>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d638b072 data-v-c596d4bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c596d4bd><span class="text" data-v-c596d4bd><!----><span data-v-c596d4bd>基础</span><span class="vpi-chevron-down text-icon" data-v-c596d4bd></span></span></button><div class="menu" data-v-c596d4bd><div class="VPMenu" data-v-c596d4bd data-v-3d019623><div class="items" data-v-3d019623><!--[--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/basics/HTML.html" data-v-e8b332e9><!--[-->HTML<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/basics/CSS.html" data-v-e8b332e9><!--[-->CSS<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/basics/JavaScript.html" data-v-e8b332e9><!--[-->JavaScript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/basics/TypeScript.html" data-v-e8b332e9><!--[-->TypeScript<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d638b072 data-v-c596d4bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c596d4bd><span class="text" data-v-c596d4bd><!----><span data-v-c596d4bd>浏览器</span><span class="vpi-chevron-down text-icon" data-v-c596d4bd></span></span></button><div class="menu" data-v-c596d4bd><div class="VPMenu" data-v-c596d4bd data-v-3d019623><div class="items" data-v-3d019623><!--[--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/browser/browser.html" data-v-e8b332e9><!--[-->浏览器概述<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/browser/v8.html" data-v-e8b332e9><!--[-->V8 引擎原理<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/browser/loop.html" data-v-e8b332e9><!--[-->页面循环<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/browser/security.html" data-v-e8b332e9><!--[-->网络安全<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-d638b072 data-v-c596d4bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c596d4bd><span class="text" data-v-c596d4bd><!----><span data-v-c596d4bd>构建工具</span><span class="vpi-chevron-down text-icon" data-v-c596d4bd></span></span></button><div class="menu" data-v-c596d4bd><div class="VPMenu" data-v-c596d4bd data-v-3d019623><div class="items" data-v-3d019623><!--[--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/buildTools/Gulp.html" data-v-e8b332e9><!--[-->Gulp<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/buildTools/Webpack.html" data-v-e8b332e9><!--[-->Webpack<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/buildTools/Rollup.html" data-v-e8b332e9><!--[-->Rollup<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/buildTools/Vite.html" data-v-e8b332e9><!--[-->Vite<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d638b072 data-v-c596d4bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c596d4bd><span class="text" data-v-c596d4bd><!----><span data-v-c596d4bd>前端框架</span><span class="vpi-chevron-down text-icon" data-v-c596d4bd></span></span></button><div class="menu" data-v-c596d4bd><div class="VPMenu" data-v-c596d4bd data-v-3d019623><div class="items" data-v-3d019623><!--[--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/framework/Vue.html" data-v-e8b332e9><!--[-->Vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-3d019623 data-v-e8b332e9><a class="VPLink link" href="/docs/framework/React.html" data-v-e8b332e9><!--[-->React<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-585947ee data-v-edbc7279><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-edbc7279 data-v-7a92ee8a data-v-b3e19d7e><span class="check" data-v-b3e19d7e><span class="icon" data-v-b3e19d7e><!--[--><span class="vpi-sun sun" data-v-7a92ee8a></span><span class="vpi-moon moon" data-v-7a92ee8a></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-585947ee data-v-512e9943 data-v-db20082e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ZhaoJiSen/docs" aria-label="github" target="_blank" rel="noopener" data-v-db20082e data-v-65eacaa6><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-585947ee data-v-2d76144c data-v-c596d4bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-c596d4bd><span class="vpi-more-horizontal icon" data-v-c596d4bd></span></button><div class="menu" data-v-c596d4bd><div class="VPMenu" data-v-c596d4bd data-v-3d019623><!----><!--[--><!--[--><!----><div class="group" data-v-2d76144c><div class="item appearance" data-v-2d76144c><p class="label" data-v-2d76144c>Appearance</p><div class="appearance-action" data-v-2d76144c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-2d76144c data-v-7a92ee8a data-v-b3e19d7e><span class="check" data-v-b3e19d7e><span class="icon" data-v-b3e19d7e><!--[--><span class="vpi-sun sun" data-v-7a92ee8a></span><span class="vpi-moon moon" data-v-7a92ee8a></span><!--]--></span></span></button></div></div></div><div class="group" data-v-2d76144c><div class="item social-links" data-v-2d76144c><div class="VPSocialLinks social-links-list" data-v-2d76144c data-v-db20082e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ZhaoJiSen/docs" aria-label="github" target="_blank" rel="noopener" data-v-db20082e data-v-65eacaa6><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-585947ee data-v-2a30da02><span class="container" data-v-2a30da02><span class="top" data-v-2a30da02></span><span class="middle" data-v-2a30da02></span><span class="bottom" data-v-2a30da02></span></span></button></div></div></div></div><div class="divider" data-v-585947ee><div class="divider-line" data-v-585947ee></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-09596c99 data-v-b6000d22><div class="container" data-v-b6000d22><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b6000d22><span class="vpi-align-left menu-icon" data-v-b6000d22></span><span class="menu-text" data-v-b6000d22>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-b6000d22 data-v-6ca7a1d1><button data-v-6ca7a1d1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-09596c99 data-v-8e8f4a6e><div class="curtain" data-v-8e8f4a6e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-8e8f4a6e><span class="visually-hidden" id="sidebar-aria-label" data-v-8e8f4a6e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-8e8f4a6e><section class="VPSidebarItem level-0" data-v-8e8f4a6e data-v-70eea6f5><div class="item" role="button" tabindex="0" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><h2 class="text" data-v-70eea6f5>核心原理</h2><!----></div><div class="items" data-v-70eea6f5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/1.%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>1.基础配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-8e8f4a6e><section class="VPSidebarItem level-0" data-v-8e8f4a6e data-v-70eea6f5><div class="item" role="button" tabindex="0" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><h2 class="text" data-v-70eea6f5>性能优化(一团乱麻)</h2><!----></div><div class="items" data-v-70eea6f5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80%E5%9B%A2%E4%B9%B1%E9%BA%BB)/1.%20%E4%BB%A3%E7%A0%81%E5%88%86%E7%A6%BB.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>1. 代码分离</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80%E5%9B%A2%E4%B9%B1%E9%BA%BB)/2.%20%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>2. 文件压缩</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80%E5%9B%A2%E4%B9%B1%E9%BA%BB)/3.%20Tree%20Shanking.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>3. Tree Shanking</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80%E5%9B%A2%E4%B9%B1%E9%BA%BB)/4.%20%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>4. 性能分析</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-8e8f4a6e><section class="VPSidebarItem level-0" data-v-8e8f4a6e data-v-70eea6f5><div class="item" role="button" tabindex="0" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><h2 class="text" data-v-70eea6f5>Babel(空空如也)</h2><!----></div><div class="items" data-v-70eea6f5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/Babel(%E7%A9%BA%E7%A9%BA%E5%A6%82%E4%B9%9F)/1.%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>1.编译流程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/Babel(%E7%A9%BA%E7%A9%BA%E5%A6%82%E4%B9%9F)/2.AST.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>2.AST</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/Babel(%E7%A9%BA%E7%A9%BA%E5%A6%82%E4%B9%9F)/3.%E6%A0%B8%E5%BF%83API.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>3.核心API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/Babel(%E7%A9%BA%E7%A9%BA%E5%A6%82%E4%B9%9F)/4.%E6%8F%92%E4%BB%B6%E5%92%8C%E9%A2%84%E8%AE%BE.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>4.插件和预设</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-70eea6f5 data-v-70eea6f5><div class="item" data-v-70eea6f5><div class="indicator" data-v-70eea6f5></div><a class="VPLink link link" href="/docs/buildTools/Webpack/Babel(%E7%A9%BA%E7%A9%BA%E5%A6%82%E4%B9%9F)/5.%E6%89%8B%E5%86%99%20Babel.html" data-v-70eea6f5><!--[--><p class="text" data-v-70eea6f5>5.手写 Babel</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-09596c99 data-v-2286b708><div class="VPDoc has-sidebar has-aside" data-v-2286b708 data-v-b6ce5881><!--[--><!--]--><div class="container" data-v-b6ce5881><div class="aside" data-v-b6ce5881><div class="aside-curtain" data-v-b6ce5881></div><div class="aside-container" data-v-b6ce5881><div class="aside-content" data-v-b6ce5881><div class="VPDocAside" data-v-b6ce5881 data-v-2a3c2c10><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-2a3c2c10 data-v-c2a36b93><div class="content" data-v-c2a36b93><div class="outline-marker" data-v-c2a36b93></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c2a36b93>On this page</div><ul class="VPDocOutlineItem root" data-v-c2a36b93 data-v-81e5fff9><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-2a3c2c10></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-b6ce5881><div class="content-container" data-v-b6ce5881><!--[--><!--]--><main class="main" data-v-b6ce5881><div style="position:relative;" class="vp-doc _docs_buildTools_Webpack_%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80%E5%9B%A2%E4%B9%B1%E9%BA%BB)_1_%20%E4%BB%A3%E7%A0%81%E5%88%86%E7%A6%BB" data-v-b6ce5881><div><p><a name="xrjF0"></a></p><h2 id="代码分离" tabindex="-1">代码分离 <a class="header-anchor" href="#代码分离" aria-label="Permalink to &quot;代码分离&quot;">​</a></h2><p>默认情况下，所有的 JS 代码，包括业务代码、三方依赖以及 Webpack 所依赖的模块化代码都会被打包进入一个 bundle 文件中。当访问这个页面时，首先会下载这个页面的 HTML，然后进行解析，当解析到 script 标签时就会下载该标签 src 所引用的资源，由于所有的代码都在一个 bundle 文件中，所以该文件势必会非常大，就会造成白屏时间过长，严重影响首页的加载速度<br><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711610864995-61a9b467-d0c7-4708-ae22-c5dfc09b0e92.png#averageHue=%23f8f6f2&amp;clientId=ue0b50868-2032-4&amp;from=paste&amp;height=30&amp;id=u0e7e7181&amp;originHeight=30&amp;originWidth=353&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=3838&amp;status=done&amp;style=shadow&amp;taskId=u6e797024-e905-4778-89ed-fb59d43e740&amp;title=html%20%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%95%E5%85%A5%E7%9A%84%20bundle&amp;width=353" alt="html 文件中引入的 bundle" title="html 文件中引入的 bundle"><br>解决单一 bundle 文件过大的方式就可以通过代码分离，使用代码分离可以按需加载或者并行加载这些文件，分离方式通常有：</p><ol><li>动态导入：使用<code>import()</code>这种方式导入</li><li>多入口起点：使用 entry 配置手动分离代码</li><li>自定义分包：Entry Dependencies 或者 SplitChunksPlugin 去重和分离代码 <a name="aBsrD"></a></li></ol><h3 id="多入口依赖" tabindex="-1">多入口依赖 <a class="header-anchor" href="#多入口依赖" aria-label="Permalink to &quot;多入口依赖&quot;">​</a></h3><p>通过配置对象形式的 entry，实现多入口。此时，对应的 output.filename 配置项中 filename 需要使用<code>[]</code>的形式来保证每个入口对应一个出口 ⚡</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.export </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    entry: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        main: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/main.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        index: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[name].bundle.js&quot;&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        path: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reslove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>**使用多入口的弊端：**如果不同入口的文件依赖了相同的库或者工具函数，这些内容将会被各自打包（重复），解决方法：</p><ol><li>通过额外配置 shared 属性表明共享的模块</li><li>将每个入口变为对象形式，并且增加 dependOn 选项</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	entry: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		index: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			import: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			dependOn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;shared&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		main: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			import: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/main.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			dependOn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;shared&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		shared: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>最终生成的打包结果中 index 中将会引入三个 bundle：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711612804129-b1fdb517-956e-4f3b-9792-eb81d0251e95.png#averageHue=%23f8f5f1&amp;clientId=ue0b50868-2032-4&amp;from=paste&amp;height=111&amp;id=u2323737a&amp;originHeight=111&amp;originWidth=310&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=5644&amp;status=done&amp;style=shadow&amp;taskId=uca685ee5-b4bf-4cbb-a830-c5cf3c5c612&amp;title=%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C&amp;width=310" alt="打包结果" title="打包结果"></p><p><a name="gQa0x"></a></p><h3 id="动态导入" tabindex="-1">动态导入 <a class="header-anchor" href="#动态导入" aria-label="Permalink to &quot;动态导入&quot;">​</a></h3><p>动态导入允许在代码执行过程中按需加载特定的模块，只有当模块被真正用到时，相关的代码才会被加载和执行。有两种动态导入的方式：</p><ol><li>使用<code>import()</code>函数语法（导出的内容通过 import.then 中 <code>res.default()</code> 来获取）</li><li>使用 Webpack 已弃用的 require.ensure</li></ol><p><code>index.js</code>文件中通过<code>import()</code>动态引入 JS 文件</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> button</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(button);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./router/about&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>动态导入的模块会被单独打包到一个文件中，且 HTML 文件中是不会引入 src_router_about_js_bundle.js 的<br><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711615663883-0aee3e93-f8a2-4cb6-b355-01b7f83c4d80.png#averageHue=%2375b468&amp;clientId=ue0b50868-2032-4&amp;from=paste&amp;height=152&amp;id=u1d857dce&amp;originHeight=202&amp;originWidth=849&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=37002&amp;status=done&amp;style=shadow&amp;taskId=ud57d57d3-184d-436c-845d-2005af039c8&amp;title=%E6%89%93%E5%8C%85%E5%90%8E%E7%9A%84%E6%96%87%E4%BB%B6&amp;width=637" alt="打包后的文件" title="打包后的文件"></p><p>⚡**包名称：**对于动态导入文件最终打包出来的名称，默认使用 filename 中设置名称规则。如果想对动态单独生成的包文件进行命名，可以在 output 中配置额外的 chunkFilename 来进行定义</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.export </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		clean: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		path: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[name]-bundle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// 只针对分包的文件命名，默认情况下获取到的 id 与 name 是一致的</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		chunkFilename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[id]_[name]_chunk.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711616969528-e4bed5ff-5e57-4e73-ba88-79bb89532939.png#averageHue=%23edd9c6&amp;clientId=ue0b50868-2032-4&amp;from=paste&amp;height=25&amp;id=Avpbj&amp;originHeight=25&amp;originWidth=409&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=2591&amp;status=done&amp;style=shadow&amp;taskId=u9f62eeea-6d9f-41ac-a096-44faeec7543&amp;title=&amp;width=409" alt="image.png"></p><p>如果想要自定义名称，则需要使用魔法注释<code>/* webpackChunkName: &#39;&#39; */</code>进行命名：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &#39;About&#39; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./router/about&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711616915172-82371c3f-83e0-4de0-bfe5-ccdc027b4b9c.png#averageHue=%23eddbc9&amp;clientId=ue0b50868-2032-4&amp;from=paste&amp;height=23&amp;id=qxWaY&amp;originHeight=23&amp;originWidth=310&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=2098&amp;status=done&amp;style=shadow&amp;taskId=u5676933a-ddd9-4ba4-bf6a-aab34076a39&amp;title=&amp;width=310" alt="image.png"></p><p><a name="u7Rmj"></a></p><h3 id="splitchunks" tabindex="-1">SplitChunks <a class="header-anchor" href="#splitchunks" aria-label="Permalink to &quot;SplitChunks&quot;">​</a></h3><p>第三种分包模式是 SplitChunks，底层使用了 SplitChunksPlugin 实现，在 Webpack5 中该插件已默认安装</p><p>默认情况下 SplitChunksPlugin 的默认值 async 只针对<code>import()</code>进行分包。但所使用的第三方库，例如 axios 即便导入和使用了，其库本身也会被放入主包</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {]);</span></span></code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711675197874-10eea985-5414-4ac2-bd7a-3c83932c92e2.png#averageHue=%23e9ecf1&amp;clientId=u8690a3f3-602b-4&amp;from=paste&amp;height=309&amp;id=u08ce0167&amp;originHeight=309&amp;originWidth=1401&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=59012&amp;status=done&amp;style=shadow&amp;taskId=ub1a9a9a4-22f9-495b-b9ce-af1c9990803&amp;title=%E9%BB%98%E8%AE%A4%E8%A2%AB%E6%94%BE%E5%85%A5%E4%B8%BB%E5%8C%85%E7%9A%84%20axios&amp;width=1401" alt="默认被放入主包的 axios" title="默认被放入主包的 axios"></p><p>可以通过配置<code>optimization.splitChunks</code>来对默认设置进行更改，打包后引入的三方库会被放入 vendors 文件中，其配置项有：</p><ol><li>maxSize：当一个包大于指定的大小时将会继续进行分包</li><li>minSize：将包拆分成不小于指定大小的包，默认值 20000 byte</li><li>cacheGroups：自定义分包，通过 key value 的形式来指定包名称以及需要打包的文件。如果没有设置 minSize 而且需要拆分的目标文件过小， Webpack 是不会对其进行拆分的</li></ol><p>**包名称：**通过<code>optimization.chunklds</code>告知 Webpack 当选择模块 id 时需要使用那种算法。</p><ol><li>size：让初始下载包更小的数字 id</li><li>natural：按使用顺序的数字 id</li><li>named：development 环境下默认值，完整名称</li><li>total-size：让总下载包更小的数字 id</li><li>determinstic：production 环境下默认值，短数字 id，有益于长期缓存</li></ol><p>完整配置：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	optimization: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		chunkIds: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;deterministic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		splitChunks: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// maxSize: 1024 * 20,      20kb</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// minSize: 1024 * 10,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			cacheGroups: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">				// 针对 vendors 所要拆包</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				vendor: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[name]_vendors.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">				// 针对 utils 进行拆包</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				utils: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">utils</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[name]_utils.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><a name="B4I4u"></a></p><h3 id="prefetch-和-preload" tabindex="-1">prefetch 和 preload <a class="header-anchor" href="#prefetch-和-preload" aria-label="Permalink to &quot;prefetch 和 preload&quot;">​</a></h3><p>在 Webpack 4.6.0+ 中增加了对 预获取 和 预加载 的支持，在声明 import 时可以使用内置质量，告知浏览器：</p><ul><li>preload（预加载）：当前导航下可能需要的资源</li><li>prefetch（预获取）：将来某些导航可能需要的资源，当使用时浏览器会从缓存中拿取</li></ul><p>使用方式：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* webpackChunkName: &#39;component&#39;*/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* webpackPreload: true */</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;./component&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ default: component }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span></code></pre></div><p>⚡preload 与 prefetch 的差异：</p><ol><li>加载方式：preload chunk 会在父 chunk 加载时，以并行方式开始加载。prefetch chunk 会在父 chunk 加载结束后开始加载</li><li>加载时机：preload chunk 具有中等优先级，立即下载。prefetch chunk 在浏览器闲置时下载</li><li>应用时机：preload chunk 会在父 chunk 中立即请求，用于当下时刻。prefetch chunk 会用于未来某个时刻</li></ol><p><a name="kYXjz"></a></p><h2 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-label="Permalink to &quot;CDN&quot;">​</a></h2><p>CDN（Content Delivery NetWork）内容分发网络，指通过相互连接的网络系统，利用最靠近用户的服务器，来更快、更可靠的将资源发送给用户。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/28960762/1711682351616-6b3619f4-6374-41ec-bed0-8ed7765572f9.png#averageHue=%23f5e6e0&amp;clientId=u92c8c39b-7131-4&amp;from=paste&amp;id=u642ea4f4&amp;originHeight=207&amp;originWidth=312&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=48856&amp;status=done&amp;style=shadow&amp;taskId=uff878a87-385d-49d2-97d8-ed6d5c073a4&amp;title=CDN%20%E7%A4%BA%E6%84%8F%E5%9B%BE" alt="CDN 示意图" title="CDN 示意图"><br>开发中的 CDN 分为两种：</p><ol><li>打包所有的静态资源，放到 CDN 服务器，用户所有资源都是通过 CDN 服务器加载的</li><li>使用第三方资源的 CDN 服务器（国内：bootCDN）</li></ol><p>第一种方式：由于打包后的根入口（index.html）引入的脚本都是基于当前目录下的，如果要把资源部署到 CDN 上需要配置 output 属性中的 publicPuth，配置后就会在路径前拼接上配置的 publicPuth</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[name].bundle.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  publicPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;www.zjs.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>第二种方式：在打包时不再需要对挂载到 CDN 的库进行打包，只需要在 html 模板（不是打包后的 html）中加入对应的 CDN 地址，然后在配置中设置 externals 然后通过 key（排除的库名称，form 中的内容）、 value（CDN 中暴露出的名称） 的形式来声明不需要打包的文件</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	externals: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		axios: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		react: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;React&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><a name="ZaUts"></a></p><h2 id="提取-css" tabindex="-1">提取 CSS <a class="header-anchor" href="#提取-css" aria-label="Permalink to &quot;提取 CSS&quot;">​</a></h2><p>利用<code>mini-css-extract-plugin</code>在打包时将 CSS 文件提取到单独的文件中</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MiniCssExtractPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini-css-extract-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">css</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				use: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">					// &#39;style-loader&#39;, 开发阶段使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					MiniCssExtractPlugin.loader, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生产阶段使用</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">					&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">					&#39;sass-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	plugins: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MiniCssExtractPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css/[name]_[hash:6].css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用 css/ 可以将文件打包到文件夹中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			chunkFilename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css/[id].css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对于动态导入的 CSS 的文件名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><a name="SEOqb"></a></p><h2 id="抽取-webpack-配置" tabindex="-1">抽取 webpack 配置 <a class="header-anchor" href="#抽取-webpack-配置" aria-label="Permalink to &quot;抽取 webpack 配置&quot;">​</a></h2><p>抽取 webpack 配置就是：</p><ol><li>将一个通用的 webpack.config.js 文件拆分成一个通用配置以及不同开发环境下的配置</li><li>通过 module.exports 导出函数的形式通过 env 参数，来区别不同环境</li><li>在 package.json 中指定<code>--config ./config/xxx --env xxx</code>配置构建以及运行命令</li></ol><p>通过插件 webpack-merge 合并不同环境下的插件</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpack-merge&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prodConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./prod.config&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> devConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./dev.config&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MiniCSSExtractPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini-css-extract-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> HTMLWebpackPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;html-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> commonConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">isProd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		entry: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			path: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;../dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[name].[hash:6].js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			clean: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			extensions: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">js</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					use: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						loader: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;babel-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">							presets: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					use: [isProd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MiniCSSExtractPlugin.loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;style-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		plugins: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLWebpackPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> env.production</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commonConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), prodConfig)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commonConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), devConfig);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	devServer: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		open: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		port: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9527</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		compress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		static: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		proxy: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">				&#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:8080&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					changeOrigin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					pathRewrite: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">						&#39;^/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> glob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;glob&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> webpack</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpack&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MiniCssExtractPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini-css-extract-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CSSMinimizerPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-minimizer-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TerserPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;terser-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PurgeCSSPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;purgecss-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PATHS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	src: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;../src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(glob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PATHS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/**/*`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { nodir: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	devtool: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	plugins: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MiniCssExtractPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css/[name].[hash].css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			chunkFilename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css/[id].[hash].css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PurgeCSSPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			paths: glob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PATHS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/**/*`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { nodir: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 需要做 Tree-Shaking 的文件目录,nodir 表示查找文件而不是文件夹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webpack.optimize.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModuleConcatenationPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	optimization: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		usedExports: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		chunkIds: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;deterministic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		splitChunks: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			minSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			cacheGroups: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				vendors: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vendors.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		minimize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		minimizer: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CSSMinimizerPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				parallel: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TerserPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				extractComments: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认为 true ，表示将注释抽取到一个单独文件中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				terserOptions: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">					// terser 相关配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					compress: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">						// 压缩相关设置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						arguments: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					mangle: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">						// 丑化相关设置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						keep_classnames: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						keep_fnames: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				parallel: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用多进程并发运行，提高构建速度（cpu 核数）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webpack serve --config ./config/common.config.js --env development&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;build&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;webpack --config ./config/common.config.js --env production&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-b6ce5881 data-v-208e2e59><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-208e2e59><span class="visually-hidden" id="doc-footer-aria-label" data-v-208e2e59>Pager</span><div class="pager" data-v-208e2e59><!----></div><div class="pager" data-v-208e2e59><a class="VPLink link pager-link next" href="/docs/buildTools/Webpack/%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/1.%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE.html" data-v-208e2e59><!--[--><span class="desc" data-v-208e2e59>Next page</span><span class="title" data-v-208e2e59>1.基础配置</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-09596c99 data-v-7cb17c94><div class="container" data-v-7cb17c94><!----><p class="copyright" data-v-7cb17c94>Copyringht @ 2024 森弟儿</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"browser_browser_index.md\":\"CB1F_3Gr\",\"browser_security_网络安全_4. 安全沙箱.md\":\"C_-spWst\",\"browser_security_网络安全_5. https.md\":\"ClNp9oHd\",\"browser_loop_页面循环_3. 宏任务和微任务.md\":\"Bcrl-sqc\",\"buildtools_webpack_babel(空空如也)_1.编译流程.md\":\"CXJqf7Vf\",\"browser_v8_index.md\":\"BT84QyNc\",\"browser_v8_v8 引擎工作原理_1. 栈空间和堆空间.md\":\"DuGXqlEB\",\"browser_v8_v8 引擎工作原理_2.垃圾回收.md\":\"BE-Bvl4v\",\"basics_css_布局相关_flex 布局.md\":\"5o3BIKSC\",\"browser_v8_v8 引擎工作原理_3.v8 引擎执行机制.md\":\"S3BqnMlf\",\"api-examples.md\":\"BosGhUwN\",\"browser_security_index.md\":\"DGBgd77y\",\"buildtools_webpack_babel(空空如也)_5.手写 babel.md\":\"CrTDAFP8\",\"browser_browser_宏观视角下的浏览器_3.渲染流程.md\":\"DZpwr7Hp\",\"browser_browser_宏观视角下的浏览器_1. chrome 架构.md\":\"CJ-YgWtM\",\"basics_css_布局相关_grid 布局.md\":\"ek2on_Dz\",\"basics_typescript_index.md\":\"DtoKd_f6\",\"browser_security_网络安全_3. csrf 攻击.md\":\"APv73t2m\",\"basics_css_css预处理器_5.@规则.md\":\"BwnRx2yr\",\"basics_html_index.md\":\"BzhSxPn2\",\"index.md\":\"B3LTHag2\",\"framework_vue_index.md\":\"CPym8Dwe\",\"browser_loop_页面循环_1. 消息队列和事件循环.md\":\"CfAOmyoU\",\"browser_browser_宏观视角下的浏览器_2.导航流程.md\":\"CF5kInFc\",\"buildtools_rollup_index.md\":\"CFtyg6z7\",\"buildtools_webpack_babel(空空如也)_2.ast.md\":\"BqFI6hbk\",\"basics_css_css预处理器_4.函数指令.md\":\"COxqZsdv\",\"basics_css_css预处理器_2.控制指令.md\":\"BhB-OCrO\",\"browser_security_网络安全_1. 同源策略.md\":\"DTMR1_i9\",\"basics_css_css预处理器_3.混合指令.md\":\"D7h1_6gS\",\"buildtools_webpack_babel(空空如也)_4.插件和预设.md\":\"DTlsKZLv\",\"buildtools_webpack_性能优化(一团乱麻)_1. 代码分离.md\":\"FU98uaJK\",\"buildtools_webpack_babel(空空如也)_3.核心api.md\":\"mktxzI3t\",\"basics_css_tailwindcss_1.基本认知.md\":\"CuEHLcPb\",\"browser_loop_index.md\":\"i_Nc4yJW\",\"markdown-examples.md\":\"CTRQOFRA\",\"browser_loop_页面循环_2. webapi.md\":\"SDFp5Xlc\",\"buildtools_webpack_核心原理_1.基础配置.md\":\"BeFPjYQT\",\"browser_security_网络安全_2. 跨站脚本攻击.md\":\"DZWMXuXZ\",\"basics_css_tailwindcss_2.unocss.md\":\"BAeHvafH\",\"basics_javascript_index.md\":\"DwU3blXX\",\"basics_css_css预处理器_1.基础语法.md\":\"Ci05ZQt9\",\"buildtools_webpack_性能优化(一团乱麻)_4. 性能分析.md\":\"TITO2Z6j\",\"framework_react_index.md\":\"BRXLmqID\",\"basics_css_css后处理器_1. ast.md\":\"DPNxIhT5\",\"buildtools_webpack_性能优化(一团乱麻)_3. tree shanking.md\":\"BmJZ2iB1\",\"buildtools_webpack_index.md\":\"DMwIv-9J\",\"buildtools_webpack_性能优化(一团乱麻)_2. 文件压缩.md\":\"Blpn0dEl\",\"buildtools_gulp_index.md\":\"DomoZM0k\",\"basics_css_index.md\":\"Cq0OFh_x\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"秘密の花園\",\"description\":\"A VitePress Site\",\"base\":\"/docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/img/logo.jpg\",\"outline\":\"deep\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"基础\",\"activeMatch\":\"basics\",\"items\":[{\"text\":\"HTML\",\"link\":\"/basics/HTML\"},{\"text\":\"CSS\",\"link\":\"/basics/CSS\"},{\"text\":\"JavaScript\",\"link\":\"/basics/JavaScript\"},{\"text\":\"TypeScript\",\"link\":\"/basics/TypeScript\"}]},{\"text\":\"浏览器\",\"activeMatch\":\"browser\",\"items\":[{\"text\":\"浏览器概述\",\"link\":\"/browser/browser\"},{\"text\":\"V8 引擎原理\",\"link\":\"/browser/v8\"},{\"text\":\"页面循环\",\"link\":\"/browser/loop\"},{\"text\":\"网络安全\",\"link\":\"/browser/security\"}]},{\"text\":\"构建工具\",\"activeMatch\":\"buildTools\",\"items\":[{\"text\":\"Gulp\",\"link\":\"/buildTools/Gulp\"},{\"text\":\"Webpack\",\"link\":\"/buildTools/Webpack\"},{\"text\":\"Rollup\",\"link\":\"/buildTools/Rollup\"},{\"text\":\"Vite\",\"link\":\"/buildTools/Vite\"}]},{\"text\":\"前端框架\",\"activeMatch\":\"framework\",\"items\":[{\"text\":\"Vue\",\"link\":\"/framework/Vue\"},{\"text\":\"React\",\"link\":\"/framework/React\"}]}],\"lastUpdated\":{\"text\":\"最后更改时间\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"short\"}},\"search\":{\"provider\":\"local\"},\"sidebar\":{\"/basics/CSS\":[{\"text\":\"布局相关\",\"collapsible\":false,\"collapsed\":false,\"items\":[{\"text\":\"Flex 布局\",\"link\":\"/basics/CSS//布局相关/Flex 布局\"},{\"text\":\"Grid 布局\",\"link\":\"/basics/CSS//布局相关/Grid 布局\"}]},{\"text\":\"CSS预处理器\",\"collapsible\":false,\"collapsed\":false,\"items\":[{\"text\":\"1.基础语法\",\"link\":\"/basics/CSS//CSS预处理器/1.基础语法\"},{\"text\":\"2.控制指令\",\"link\":\"/basics/CSS//CSS预处理器/2.控制指令\"},{\"text\":\"3.混合指令\",\"link\":\"/basics/CSS//CSS预处理器/3.混合指令\"},{\"text\":\"4.函数指令\",\"link\":\"/basics/CSS//CSS预处理器/4.函数指令\"},{\"text\":\"5.@规则\",\"link\":\"/basics/CSS//CSS预处理器/5.@规则\"}]},{\"text\":\"CSS后处理器\",\"collapsible\":false,\"collapsed\":false,\"items\":[{\"text\":\"1. AST\",\"link\":\"/basics/CSS//CSS后处理器/1. AST\"}]},{\"text\":\"TailwindCSS\",\"collapsible\":false,\"collapsed\":false,\"items\":[{\"text\":\"1.基本认知\",\"link\":\"/basics/CSS//TailwindCSS/1.基本认知\"},{\"text\":\"2.UnoCSS\",\"link\":\"/basics/CSS//TailwindCSS/2.UnoCSS\"}]}],\"/basics/JavaScript\":[{\"text\":\"函数式编程\",\"items\":[]}],\"/browser/browser\":[{\"text\":\"宏观视角下的浏览器\",\"items\":[{\"text\":\"1. Chrome 架构\",\"link\":\"/browser/browser/宏观视角下的浏览器/1. Chrome 架构\"},{\"text\":\"2.导航流程\",\"link\":\"/browser/browser/宏观视角下的浏览器/2.导航流程\"},{\"text\":\"3.渲染流程\",\"link\":\"/browser/browser/宏观视角下的浏览器/3.渲染流程\"}]}],\"/browser/v8/\":[{\"text\":\"V8 引擎工作原理\",\"items\":[{\"text\":\"1. 栈空间和堆空间\",\"link\":\"/browser/v8/V8 引擎工作原理/1. 栈空间和堆空间\"},{\"text\":\"2.垃圾回收\",\"link\":\"/browser/v8/V8 引擎工作原理/2.垃圾回收\"},{\"text\":\"3.V8 引擎执行机制\",\"link\":\"/browser/v8/V8 引擎工作原理/3.V8 引擎执行机制\"}]}],\"/browser/loop/\":[{\"text\":\"页面循环\",\"items\":[{\"text\":\"1. 消息队列和事件循环\",\"link\":\"/browser/loop/页面循环/1. 消息队列和事件循环\"},{\"text\":\"2. WebAPI\",\"link\":\"/browser/loop/页面循环/2. WebAPI\"},{\"text\":\"3. 宏任务和微任务\",\"link\":\"/browser/loop/页面循环/3. 宏任务和微任务\"}]}],\"/browser/security/\":[{\"text\":\"网络安全\",\"items\":[{\"text\":\"1. 同源策略\",\"link\":\"/browser/security/网络安全/1. 同源策略\"},{\"text\":\"2. 跨站脚本攻击\",\"link\":\"/browser/security/网络安全/2. 跨站脚本攻击\"},{\"text\":\"3. CSRF 攻击\",\"link\":\"/browser/security/网络安全/3. CSRF 攻击\"},{\"text\":\"4. 安全沙箱\",\"link\":\"/browser/security/网络安全/4. 安全沙箱\"},{\"text\":\"5. HTTPS\",\"link\":\"/browser/security/网络安全/5. HTTPS\"}]}],\"buildTools/Webpack\":[{\"text\":\"核心原理\",\"items\":[{\"text\":\"1.基础配置\",\"link\":\"/buildTools/Webpack//核心原理/1.基础配置\"}]},{\"text\":\"性能优化(一团乱麻)\",\"items\":[{\"text\":\"1. 代码分离\",\"link\":\"/buildTools/Webpack//性能优化(一团乱麻)/1. 代码分离\"},{\"text\":\"2. 文件压缩\",\"link\":\"/buildTools/Webpack//性能优化(一团乱麻)/2. 文件压缩\"},{\"text\":\"3. Tree Shanking\",\"link\":\"/buildTools/Webpack//性能优化(一团乱麻)/3. Tree Shanking\"},{\"text\":\"4. 性能分析\",\"link\":\"/buildTools/Webpack//性能优化(一团乱麻)/4. 性能分析\"}]},{\"text\":\"Babel(空空如也)\",\"items\":[{\"text\":\"1.编译流程\",\"link\":\"/buildTools/Webpack//Babel(空空如也)/1.编译流程\"},{\"text\":\"2.AST\",\"link\":\"/buildTools/Webpack//Babel(空空如也)/2.AST\"},{\"text\":\"3.核心API\",\"link\":\"/buildTools/Webpack//Babel(空空如也)/3.核心API\"},{\"text\":\"4.插件和预设\",\"link\":\"/buildTools/Webpack//Babel(空空如也)/4.插件和预设\"},{\"text\":\"5.手写 Babel\",\"link\":\"/buildTools/Webpack//Babel(空空如也)/5.手写 Babel\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ZhaoJiSen/docs\"}],\"footer\":{\"copyright\":\"Copyringht @ 2024 森弟儿\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>